<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Now – Ben Pomeranz</title>
  <link rel="icon" href="favicon.ico">
  <link rel="stylesheet" href="style.css">
  <style>
      body {
          font-family: sans-serif;
          font-size: 120%;
      }
      a {
          text-decoration: none;
          color: inherit;
      }
      a::before { content: "["; }
      a::after { content: "]"; }
      a:hover { text-decoration: underline; }
      .widget {
          border: 1px solid #ddd;
          border-radius: 0;
          padding: 1rem 1.25rem;
          display: inline-block;
          background: #fafafa;
          flex: 1;
      }
      .widgets-container {
          display: flex;
          gap: 1rem;
          align-items: stretch;
          margin-top: 1rem;
      }
      .widget h2 {
          margin-top: 0;
          font-size: 1.25rem;
      }
      .widget ul {
          margin: 0.5rem 0 0 0;
          padding-left: 1.25rem;
      }
      .muted {
          font-size: 0.9rem;
          opacity: 0.7;
      }
      .spotify-row {
          display: flex;
          align-items: center;
          gap: 1rem;
      }
      .spotify-row img {
          width: 100px;
          height: 100px;
          object-fit: cover;
      }
      nav {
          display: flex;
          align-items: center;
          gap: 10px;
      }
      nav img {
          display: inline;
          margin: 0;
          width: auto;
      }
      nav img.icon {
          height: 20px;
          width: auto;
          display: inline-block;
          vertical-align: middle;
      }
      .spotify-row a::before,
      .spotify-row a::after {
          content: none;
      }
  </style>
</head>
<body>
  <div id="nav-placeholder"></div>
<script>
  fetch("nav.html")
    .then(response => response.text())
    .then(data => {
      document.getElementById("nav-placeholder").innerHTML = data;
    });
</script>
  <h1>Now</h1>
  <p>
    I am at Brown University this autumn, continuing my degrees in math and computer science. I recently got back from <a href="https://www.worksinprogress.news/p/apply-for-invisible-college-2025" target="_blank" rel="noopener">Invisible College</a>, and before that I was at Montana State University trying to make <a href="poster.pdf" target="_blank">metabolic data easier to interpret</a> and <a href="https://www.strava.com/athletes/70147433" target="_blank" rel="noopener">running about</a>.
  </p>

  <div class="widgets-container">
    <section class="widget" aria-labelledby="currently-studying-title">
      <h2 id="currently-studying-title">Currently studying</h2>
      <!-- Edit this list as you switch classes -->
      <ul id="current-courses">
        <li>Algebra</li>
        <li>Theory of Computing</li>
        <li>Real Analysis</li>
      </ul>
    </section>
    <section class="widget" aria-labelledby="last-listened-title">
      <h2 id="last-listened-title">Currently listening</h2>
      <div class="spotify-row">
        <img src="" alt="Album cover" id="sp-cover" />
        <div>
          <div id="sp-title"></div>
          <div id="sp-artist" class="muted"></div>
        </div>
      </div>
    </section>
  </div>
  <script>
    fetch('https://my-spotify-worker.ben-pomeranz.workers.dev')
      .then(response => response.json())
      .then(data => {
        const titleEl = document.getElementById('sp-title');
        const artistEl = document.getElementById('sp-artist');
        const coverEl = document.getElementById('sp-cover');
        if(data.url) {
          const link = document.createElement('a');
          link.href = data.url;
          link.textContent = data.title;
          link.target = '_blank';
          link.rel = 'noopener';
          titleEl.textContent = '';
          titleEl.appendChild(link);
        } else {
          titleEl.textContent = data.title;
        }
        if (data.artists) {
          artistEl.textContent = (data.album ? `${data.artists} – ${data.album}` : data.artists);
        } else {
          artistEl.textContent = data.album || '';
        }
        if (data.cover) {
          coverEl.src = data.cover;
          coverEl.alt = data.album || 'Album cover';
          coverEl.style.display = 'inline-block';
        } else {
          coverEl.style.display = 'none';
        }
      })
      .catch(() => {
        document.getElementById('sp-title').textContent = 'Unable to load track info';
      });
  </script>
</body>

</html>